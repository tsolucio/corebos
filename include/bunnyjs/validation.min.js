var babelHelpers={},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,i){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var u in o)void 0===n[u]&&(n[u]=o[u]);else n||(n=o||{});if(1===a)n.children=i;else if(a>1){for(var l=Array(a),s=0;s<a;s++)l[s]=arguments[s+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,i){var u={key:e,arg:t,resolve:n,reject:i,next:null};a?a=a.next=u:(o=a=u,r(e,t))})}function r(n,o){try{var a=t[n](o),u=a.value;u instanceof e?Promise.resolve(u.value).then(function(e){r("next",e)},function(e){r("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):a=null}var o,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),asyncGeneratorDelegate=function(e,t){function n(n,r){return i=!0,r=new Promise(function(t){t(e[n](r))}),{done:!1,value:t(r)}}var r={},i=!1;return"function"==typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){return this}),r.next=function(e){return i?(i=!1,e):n("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(i)throw i=!1,e;return n("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n("return",e)}),r},asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),u=a.value}catch(e){return void n(e)}return a.done?void e(u):Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),defineEnumerableProperties=function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e},defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e},defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},objectWithoutProperties=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},selfGlobal="undefined"==typeof global?self:global,set=function e(t,n,r,i){var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,i)}else if("value"in o&&o.writable)o.value=r;else{var u=o.set;void 0!==u&&u.call(i,r)}return r},slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},temporalRef=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},temporalUndefined={},toArray=function(e){return Array.isArray(e)?e:Array.from(e)},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ValidationConfig={classInputGroup:"form-group",classInputGroupError:"has-danger",classInputGroupSuccess:"has-success",classLabel:"form-control-label",tagNameError:"small",classError:"text-help",selectorInput:"[name]"},ValidationLang={required:"'{label}' is required",email:"'{label}' should be a valid e-mail address",url:"{label} should be a valid website URL",tel:"'{label}' is not a valid telephone number",maxLength:"'{label}' length must be < '{maxLength}'",minLength:"'{label}' length must be > '{minLength}'",maxFileSize:"Max file size must be < {maxFileSize}MB, uploaded {fileSize}MB",image:"'{label}' should be an image (JPG or PNG)",minImageDimensions:"'{label}' must be > {minWidth}x{minHeight}, uploaded {width}x{height}",maxImageDimensions:"'{label}' must be < {maxWidth}x{maxHeight}, uploaded {width}x{height}",requiredFromList:"Select '{label}' from list",confirmation:"'{label}' is not equal to '{originalLabel}'",minOptions:"Please select at least {minOptionsCount} options"},_bn_getFile=function(e){return void 0!==e._file&&""!==e._file?e._file instanceof Blob!=!1&&e._file:e.files[0]||!1},ValidationValidators={required:function(e){return new Promise(function(t,n){e.hasAttribute("required")&&("file"!==e.getAttribute("type")&&""===e.value||("radio"===e.type||"checkbox"===e.type)&&!e.checked||"file"===e.getAttribute("type")&&_bn_getFile(e)===!1)?n():t()})},email:function(e){return new Promise(function(t,n){if(e.value.length>0&&"email"===e.getAttribute("type")){var r=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;r.test(e.value)?t():n()}else t()})},url:function(e){return new Promise(function(t,n){if(e.value.length>0&&"url"===e.getAttribute("type")){var r=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi;r.test(e.value)?t():n()}else t()})},tel:function(e){return new Promise(function(t,n){if(e.value.length>0&&"tel"===e.getAttribute("type")){var r=/^[0-9\-\+\(\)\#\ \*]{6,20}$/;r.test(e.value)?t():n()}else t()})},maxLength:function(e){return new Promise(function(t,n){null!==e.getAttribute("maxlength")&&e.value.length>e.getAttribute("maxlength")?n({maxLength:e.getAttribute("maxlength")}):t()})},minLength:function(e){return new Promise(function(t,n){null!==e.getAttribute("minlength")&&e.value.length<e.getAttribute("minlength")?n({minLength:e.getAttribute("minlength")}):t()})},maxFileSize:function(e){return new Promise(function(t,n){if("file"===e.getAttribute("type")&&e.hasAttribute("maxfilesize")&&_bn_getFile(e)!==!1){var r=parseFloat(e.getAttribute("maxfilesize")),i=(_bn_getFile(e).size/1e6).toFixed(2);i<=r?t(e):n({maxFileSize:r,fileSize:i})}else t(e)})},image:function(e){return new Promise(function(t,n){"file"===e.getAttribute("type")&&e.getAttribute("accept").indexOf("image")>-1&&_bn_getFile(e)!==!1?BunnyFile.getSignature(_bn_getFile(e)).then(function(e){BunnyFile.isJpeg(e)||BunnyFile.isPng(e)?t():n({signature:e})}).catch(function(e){n(e)}):t()})},minImageDimensions:function(e){return new Promise(function(t,n){e.hasAttribute("mindimensions")&&_bn_getFile(e)!==!1?!function(){var r=e.getAttribute("mindimensions").split("x"),i=slicedToArray(r,2),o=i[0],a=i[1];BunnyImage.getImageByBlob(_bn_getFile(e)).then(function(e){var r=BunnyImage.getImageWidth(e),i=BunnyImage.getImageHeight(e);r<o||i<a?n({width:r,height:i,minWidth:o,minHeight:a}):t()}).catch(function(e){n(e)})}():t()})},maxImageDimensions:function(e){return new Promise(function(t,n){e.hasAttribute("maxdimensions")&&_bn_getFile(e)!==!1?!function(){var r=e.getAttribute("maxdimensions").split("x"),i=slicedToArray(r,2),o=i[0],a=i[1];BunnyImage.getImageByBlob(_bn_getFile(e)).then(function(e){var r=BunnyImage.getImageWidth(e),i=BunnyImage.getImageHeight(e);r>o||i>a?n({width:r,height:i,maxWidth:o,maxHeight:a}):t()}).catch(function(e){n(e)})}():t()})},requiredFromList:function(e){return new Promise(function(t,n){var r=void 0;r=e.hasAttribute("requiredfromlist")?e.getAttribute("requiredfromlist"):e.name+"_id";var i=document.getElementById(r);i?i.value.length>0?t():n():t()})},minOptions:function(e){return new Promise(function(t,n){e.hasAttribute("minoptions")?!function(){var r=parseInt(e.getAttribute("minoptions")),i=ValidationUI.getInputGroup(e),o=i.getElementsByTagName("input"),a=0;[].forEach.call(o,function(t){t!==e&&""!==t.value&&a++}),a<r?n({minOptionsCount:r}):t()}():t()})},confirmation:function(e){return new Promise(function(t,n){if(e.name.indexOf("_confirmation")>-1){var r=e.name.substr(0,e.name.length-13),i=document.getElementById(r);i.value==e.value?t():n({originalLabel:ValidationUI.getLabel(ValidationUI.getInputGroup(i)).textContent})}else t()})},ajax:function(e){return new Promise(function(t,n){if(void 0!==e.dataset.ajax&&e.value.length>0){var r=e.dataset.ajax.replace("{value}",encodeURIComponent(e.value));Ajax.get(r,function(e){e=JSON.parse(e),void 0!==e.message&&""!==e.message?n(e.message):t()},function(){n("Ajax error")})}else t()})}},ValidationUI={config:ValidationConfig,insertErrorNode:function(e,t){e.appendChild(t)},toggleErrorClass:function(e){e.classList.toggle(this.config.classInputGroupError)},createErrorNode:function(){var e=document.createElement(this.config.tagNameError);return e.classList.add(this.config.classError),e},getErrorNode:function(e){return e.getElementsByClassName(this.config.classError)[0]||!1},removeErrorNode:function(e){var t=this.getErrorNode(e);t&&(t.parentNode.removeChild(t),this.toggleErrorClass(e))},setErrorMessage:function(e,t){var n=this.getErrorNode(e);n===!1&&(n=this.createErrorNode(),this.toggleErrorClass(e),this.insertErrorNode(e,n)),n.textContent=t},setInputValid:function(e){e.classList.add(this.config.classInputGroupSuccess)},getInput:function(e){return e.querySelector(this.config.selectorInput)||!1},getInputGroup:function(e){for(var t=e;(t=t.parentNode)&&!t.classList.contains(this.config.classInputGroup););return t},getInputsInSection:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getInputGroupsInSection(e),r=void 0;r=t?{inputs:{},invalidInputs:{},length:0,unresolvedLength:0,invalidLength:0}:[];for(var i=0;i<n.length;i++){var o=this.getInput(n[i]);if(o===!1)throw new Error("Bunny Validation: Input group has no input");t?(r.inputs[i]={input:o,isValid:null},r.length++,r.unresolvedLength++):r.push(o)}return r},getLabel:function(e){return e.getElementsByTagName("label")[0]||!1},getInputGroupsInSection:function(e){return e.getElementsByClassName(this.config.classInputGroup)}},Validation={validators:ValidationValidators,lang:ValidationLang,ui:ValidationUI,init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.setAttribute("novalidate",""),e.addEventListener("submit",function(n){n.preventDefault();var r=e.querySelectorAll('[type="submit"]');[].forEach.call(r,function(e){e.disabled=!0}),t.validateSection(e).then(function(n){[].forEach.call(r,function(e){e.disabled=!1}),n===!0?e.submit():t.focusInput(n[0])})}),n&&this.initInline(e)},initInline:function(e){var t=this,n=this.ui.getInputsInSection(e);n.forEach(function(e){e.addEventListener("change",function(){t.checkInput(e).catch(function(e){})})})},validateSection:function(e){var t=this;if(void 0!==e.__bunny_validation_state)throw new Error("Bunny Validation: validation already in progress.");return e.__bunny_validation_state=!0,new Promise(function(n){var r=t.ui.getInputsInSection(e,!0);if(0===r.length)t._endSectionValidation(e,r,n);else{for(var i=function(i){var o=r.inputs[i].input;t.checkInput(o).then(function(){t._addValidInput(r,o),0===r.unresolvedLength&&t._endSectionValidation(e,r,n)}).catch(function(i){t._addInvalidInput(r,o),0===r.unresolvedLength&&t._endSectionValidation(e,r,n)})},o=0;o<r.length;o++)i(o);setTimeout(function(){if(r.unresolvedLength>0)for(var i=t._getUnresolvedInputs(r),o=0;o<i.length;o++){var a=i[o],u=t.ui.getInputGroup(a);t._addInvalidInput(r,a),t.ui.setErrorMessage(u,"Validation terminated after 3s"),0===r.unresolvedLength&&t._endSectionValidation(e,r,n)}},3e3)}})},focusInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-50;BunnyElement.scrollTo(e,t,n),e.focus(),null!==e.offsetParent&&void 0!==e.setSelectionRange&&["text","search","url","tel","password"].indexOf(e.type)!==-1&&"function"==typeof e.setSelectionRange&&e.setSelectionRange(e.value.length,e.value.length)},checkInput:function(e){var t=this;return new Promise(function(n,r){t._checkInput(e,0,n,r)})},_addValidInput:function(e,t){e.unresolvedLength--;for(var n in e.inputs)if(t===e.inputs[n].input){e.inputs[n].isValid=!0;break}},_addInvalidInput:function(e,t){e.unresolvedLength--,e.invalidLength++;for(var n in e.inputs)if(t===e.inputs[n].input){e.inputs[n].isValid=!1,e.invalidInputs[n]=t;break}},_getUnresolvedInputs:function(e){var t=[];for(var n in e.inputs)e.inputs[n].isValid||t.push(e.inputs[n].input);return t},_endSectionValidation:function(e,t,n){if(delete e.__bunny_validation_state,0===t.invalidLength)return n(!0);var r=[];for(var i in t.invalidInputs)r.push(t.invalidInputs[i]);return n(r)},_checkInput:function(e,t,n,r){var i=this,o=Object.keys(this.validators),a=o[t],u=this.validators[a];u(e).then(function(){if(t++,void 0!==o[t])i._checkInput(e,t,n,r);else{var a=i.ui.getInputGroup(e);i.ui.removeErrorNode(a),void 0!==e.form&&e.form.hasAttribute("showvalid")&&i.ui.setInputValid(a),n()}}).catch(function(t){var n=i.ui.getInputGroup(e),o=i.ui.getLabel(n),u=i._getErrorMessage(a,e,o,t);i.ui.setErrorMessage(n,u),r(u)})},_getErrorMessage:function(e,t,n,r){var i="";if("string"==typeof r)i=r;else{if(void 0===this.lang[e])throw new Error("Bunny Validation: Lang message not found for validator: "+e);i=this.lang[e]}i=n!==!1?i.replace("{label}",n.textContent):t.placeholder&&""!==t.placeholder?i.replace("{label}",t.placeholder):i.replace("{label}","");for(var o in r)i=i.replace("{"+o+"}",r[o]);return i}};document.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.forms,function(e){if("bunny"===e.getAttribute("validator")){var t=e.hasAttribute("validator-inline");Validation.init(e,t)}})});