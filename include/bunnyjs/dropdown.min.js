var DropdownConfig={useTagNames:!1,factoryAddClassNames:!0,factoryAltClassNameMenu:"w-100",useHiddenAttribute:!1,tagName:"dropdown",tagNameToggleBtn:"button",tagNameMenu:"menu",tagNameItem:"item",className:"dropdown",classNameToggleBtn:"dropdown-toggle",classNameMenu:"dropdown-menu",classNameItem:"dropdown-item",classNameActive:"active",roleMenu:"menu",roleMenuItem:"menuitem",additionalClassNameMenu:"w-100",classNameOpened:"open",applyOpenedClassToDropdown:!0},DropdownUI={Config:DropdownConfig,_getElement:function(e,t){return this.Config.useTagNames?e.getElementsByTagName(this.Config["tagName"+t])[0]||!1:e.getElementsByClassName(this.Config["className"+t])[0]||!1},_createElement:function(e){var t=null;return this.Config.useTagNames?(t=document.createElement(this.Config["tagName"+e]),"button"===this.Config["tagName"+e]&&t.setAttribute("type","button")):t=document.createElement("div"),this.Config.factoryAddClassNames&&t.classList.add(this.Config["className"+e]),t},getToggleBtn:function(e){for(var t=e.children,n=0;n<t.length;n++)if(t[n].tagName===this.Config.tagNameToggleBtn.toUpperCase())return t[n];return e.classList.contains(this.Config.classNameToggleBtn)?e:e.getElementsByClassName(this.Config.classNameToggleBtn)[0]||!1},getTriggerElement:function(e){return this.getToggleBtn(e)},getMenu:function(e){return this._getElement(e,"Menu")},createMenu:function(){var e=this._createElement("Menu");return this.Config.factoryAltClassNameMenu&&e.classList.add(this.Config.factoryAltClassNameMenu),e},removeMenu:function(e){var t=this.getMenu(e);t&&t.parentNode.removeChild(t)},getMenuItems:function(e){var t=this.getMenu(e);if(!t)return[];var n="";return n+=this.Config.useTagNames?this.Config.tagNameItem:"."+this.Config.classNameItem,n+=', [role="menuitem"]',t.querySelectorAll(n)},isMenuItem:function(e,t){for(var n=this.getMenuItems(e),i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},removeMenuItems:function(e){var t=this.getMenu(e);t&&(t.innerHTML="")},setMenuItems:function(e,t){var n=this.getMenu(e);n?n.innerHTML="":(n=this.createMenu(),e.appendChild(n)),n.appendChild(t)},getItemValue:function(e){return e!==!1&&e.dataset.value},setItemValue:function(e,t){e.dataset.value=t},createMenuItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createDocumentFragment();for(var i in e){var o=this._createElement("Item");null!==t?n.appendChild(t(o,i,e[i])):(this.setItemValue(o,i),o.textContent=e[i],n.appendChild(o))}return n},getDropdownByToggleBtn:function(e){return e.parentNode},getAllDropdowns:function(){return this.Config.useTagNames?document.getElementsByTagName(this.Config.tagName):document.getElementsByClassName(this.Config.className)},show:function(e){var t=this.getTriggerElement(e);t&&t.setAttribute("aria-expanded","true");var n=this.getMenu(e);if(this.Config.useHiddenAttribute)return!!n.hasAttribute("hidden")&&(n.removeAttribute("hidden"),!0);var i=this.Config.applyOpenedClassToDropdown?e:n;return!i.classList.contains(this.Config.classNameOpened)&&(i.classList.add(this.Config.classNameOpened),!0)},hide:function(e){var t=this.getMenu(e),n=this.Config.applyOpenedClassToDropdown?e:t,i=!1;if(this.Config.useHiddenAttribute&&!t.hasAttribute("hidden")?(t.setAttribute("hidden",""),i=!0):n.classList.contains(this.Config.classNameOpened)&&(n.classList.remove(this.Config.classNameOpened),i=!0),i){var o=this.getTriggerElement(e);o&&(o.setAttribute("aria-expanded","false"),this.isMenuItem(e,document.activeElement)&&o.focus())}return i},isOpened:function(e){var t=this.getMenu(e);if(this.Config.useHiddenAttribute)return!t.hasAttribute("hidden");var n=this.Config.applyOpenedClassToDropdown?e:t;return n.classList.contains(this.Config.classNameOpened)},setItemActive:function(e){e.classList.add(this.Config.classNameActive),e.setAttribute("aria-selected","true")},setItemInactive:function(e){e.classList.remove(this.Config.classNameActive),e.removeAttribute("aria-selected")}},Dropdown={UI:DropdownUI,Config:DropdownConfig,init:function(e){return void 0===e.__bunny_dropdown&&(e.__bunny_dropdown={},this._addToggleClickEvent(e),this._setARIA(e),initObjectExtensions(this,e),!0)},initAll:function(){var e=this,t=this.UI.getAllDropdowns();[].forEach.call(t,function(t){e.init(t)})},isHoverable:function(e){return e.hasAttribute("dropdown-hover")},isClosableOnItemClick:function(e){return!e.hasAttribute("dropdown-keep-inside")},open:function(e){var t=this;if(this.UI.show(e)){setTimeout(function(){e.__bunny_dropdown_cancel=onClickOutside(e,function(){t._callCancelCallbacks(e),t.close(e)})},100);var n=this.UI.getMenuItems(e);[].forEach.call(n,function(n){n.__bunny_dropdown_click=addEvent(n,"click",function(){t._callItemSelectCallbacks(e,n),t.isClosableOnItemClick(e)&&t.close(e)})}),e.__bunny_dropdown_key=addEventKeyNavigation(e,n,function(n){n===!1?t._callCancelCallbacks(e):t._callItemSelectCallbacks(e,n),t.close(e)},function(n){t._callSwitchCallbacks(e,n)}),e.dispatchEvent(this._getOpenEvent(e))}},close:function(e){if(this.UI.hide(e)){removeClickOutside(e,e.__bunny_dropdown_cancel),delete e.__bunny_dropdown_cancel;var t=this.UI.getMenuItems(e);[].forEach.call(t,function(e){removeEvent(e,"click",e.__bunny_dropdown_click),delete e.__bunny_dropdown_click}),removeEventKeyNavigation(e,e.__bunny_dropdown_key),delete e.__bunny_dropdown_key,e.dispatchEvent(this._getCloseEvent(e))}},onItemSelect:function(e,t){pushCallbackToElement(e,"dropdown_item",t)},onCancel:function(e,t){pushCallbackToElement(e,"dropdown_cancel",t)},onItemSwitched:function(e,t){pushCallbackToElement(e,"dropdown_switch",t)},_addToggleClickEvent:function(e){var t=this,n=this.UI.getToggleBtn(e);n&&(addEvent(n,"click",this._onToggleClick.bind(this,e)),addEvent(n,"keydown",function(e){e.keyCode!==KEY_ENTER&&e.keyCode!==KEY_SPACE||n.click()}),this.isHoverable(e)&&!function(){var i=t.UI.getMenu(e);addEventOnce(e,"mouseover",function(n){t.open(e)},50),addEventOnce(e,"mouseout",function(o){isEventCursorInside(o,n)||isEventCursorInside(o,i)||t.close(e)},500)}())},_callItemSelectCallbacks:function(e,t){callElementCallbacks(e,"dropdown_item",function(e){var n=e(t);return n instanceof Promise?new Promise(function(e){n.then(function(t){e(t===!1?!1:!0)})}):n!==!1&&void 0})},_callCancelCallbacks:function(e){callElementCallbacks(e,"dropdown_cancel",function(e){e()})},_callSwitchCallbacks:function(e,t){callElementCallbacks(e,"dropdown_switch",function(e){e(t)})},_setARIA:function(e){var t=this,n=this.UI.getToggleBtn(e);n&&(n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-expanded","false"));var i=this.UI.getMenu(e);if(i){i.setAttribute("role",this.Config.roleMenu),i.setAttribute("tabindex","-1");var o=this.UI.getMenuItems(e);o&&[].forEach.call(o,function(e){e.setAttribute("role",t.Config.roleMenuItem),e.setAttribute("tabindex","-1")})}},_onToggleClick:function(e){this.UI.isOpened(e)?this.close(e):this.open(e)},_getCloseEvent:function(e){return new CustomEvent("close",{detail:{dropdown:e}})},_getOpenEvent:function(e){return new CustomEvent("open",{detail:{dropdown:e}})}};document.addEventListener("DOMContentLoaded",function(){Dropdown.initAll()});