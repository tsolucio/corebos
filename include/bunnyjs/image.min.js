var BunnyImage={IMG_CONVERT_TYPE:"image/jpeg",IMG_QUALITY:.7,getImage:function(e){return"string"==typeof e?this.getImageByURL(e):this.getImageByBlob(e)},getImageByURL:function(e){return this._toImagePromise(e,!0)},_toImagePromise:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Image,i=new Promise(function(e,t){n.onload=function(){e(n)},n.onerror=function(e){t(e)}});return t&&(n.crossOrigin="Anonymous"),n.src=e,i},getImageByBlob:function(e){var t=BunnyFile.getBlobLocalURL(e);return this._toImagePromise(t)},getImageByBase64:function(e){var t=e;return this._toImagePromise(t)},getImageByCanvas:function(e){var t=e.toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY);return this._toImagePromise(t)},imageToCanvas:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.complete)throw new Error("Can not create canvas from Image. Image is not loaded yet.");var i=document.createElement("canvas");return null===t&&null===n?(i.width=e.naturalWidth,i.height=e.naturalHeight,i.getContext("2d").drawImage(e,0,0)):(i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0,t,n)),i},imageToBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.imageToCanvas(e,t,n).toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY)},imageToBlob:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return BunnyFile.base64ToBlob(this.imageToBase64(e,t,n))},getImageURL:function(e){return e.src},getImageWidth:function(e){if(!e.complete)throw new Error("Can not get Image.width. Image is not loaded yet.");return e.width},getImageHeight:function(e){if(!e.complete)throw new Error("Can not get Image.height. Image is not loaded yet.");return e.height},getImageNewAspectSizes:function(e,t,n){var i=this.getImageWidth(e),a=this.getImageHeight(e);if(0===i||0===a)throw new Error("Image width or height is 0 in BunnyImage.getImageNewAspectSizes().");var o=Math.min(t/i,n/a);return{width:Math.floor(i*o),height:Math.floor(a*o)}},resizeImage:function(e,t,n){var i=this.getImageNewAspectSizes(e,t,n),a=i.width,o=i.height,r=this.imageToCanvas(e,a,o);return r},resizeCanvas:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=t);var i=document.createElement("canvas"),a=i.getContext("2d");return i.width=t,i.height=n,a.drawImage(e,0,0,e.width,e.height,0,0,t,n),i},crop:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null===a&&(a=i);var o=e.naturalWidth/e.clientWidth,r=document.createElement("canvas"),g=i*o,h=a*o;r.width=g,r.height=h;var u=r.getContext("2d");return u.drawImage(e,t*o,n*o,g,h,0,0,g,h),r},cropByCursor:function(e,t){return this.crop(e,t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight)}};